<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products | Mahadev Traders</title>
  <link rel="icon" href="assets/favicon.webp" type="image/x-icon" />
  <link rel="canonical" href="https://about.vaives.com/products" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- CSS -->
  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="products.css" />

  <!-- SEO Meta Tags -->
  <meta name="description"
    content="Explore our extensive range of premium Plywood, Block-Boards, and Flush Doors. Authorized dealer of Marlex, Zevik, Simson, and more." />
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar" id="navbar">
    <div class="brand">
      <a href="index.html">Mahadev Traders</a>
    </div>
    <div class="menu" id="menu">
      <a href="products.html" class="active">Products</a>
      <a href="index.html#about">About</a>
      <a href="index.html#expertise">Expertise</a>
      <a href="index.html#brands">Brands</a>
      <a href="index.html#contact">Contact</a>
      <a href="tel:+916355360702" class="btn-primary">Call Now</a>
    </div>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <div class="hero-bg"></div>
    <div class="hero-content">
      <h1>Our <span class="text-gradient">Products</span></h1>
      <p>Explore our extensive range of premium quality Plywood, Block Boards & Flush Doors.</p>
    </div>
  </section>

  <!-- Products Section -->
  <section class="product-categories" id="product-categories">
    <div class="pc-content">
      <div id="products-container">
        <!-- Products will be loaded here via JS -->
        <div style="text-align: center; color: var(--color-text-muted);">
          <i class="fas fa-circle-notch fa-spin fa-2x"></i>
          <p style="margin-top: 1rem;">Loading products...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Modal -->
  <div id="galleryModal" class="gallery-modal">
    <div class="gallery-modal-content">
      <div class="carousel-container">
        <button class="carousel-prev"><i class="fas fa-chevron-left"></i></button>
        <img id="modal-carousel-image" src="" alt="" class="carousel-image">
        <button class="carousel-next"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>Mahadev Traders</h4>
          <p style="color: var(--color-text-muted); font-size: 0.9rem;">
            Your trusted partner for premium quality plywood and furniture solutions in Gujarat.
          </p>
        </div>
        <div class="footer-col">
          <h4>Quick Links</h4>
          <ul class="footer-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="productChart.html">Product Chart</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Connect</h4>
          <div class="social-links">
            <a href="https://www.facebook.com/Mahadev.Traders.Plywood.Block.Board.and.Flush.Door/" target="_blank"><i
                class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/mt_plywood/" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/916355360702" target="_blank"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Mahadev Traders. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="navbar.js"></script>
  <script>
    // Global variables for modal carousel
    let currentGalleryImages = [];
    let currentGalleryIndex = 0;

    function updateModalImage() {
      const modalImg = document.getElementById('modal-carousel-image');
      if (currentGalleryImages.length > 0) {
        modalImg.src = currentGalleryImages[currentGalleryIndex];
      }
    }

    function openGalleryModal(images, initialIndex = 0) {
      currentGalleryImages = images;
      currentGalleryIndex = initialIndex;
      updateModalImage();
      document.getElementById('galleryModal').style.display = 'flex';
    }

    // Close modal
    window.addEventListener('click', (e) => {
      const modal = document.getElementById('galleryModal');
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === "Escape") {
        document.getElementById('galleryModal').style.display = 'none';
      }
    });

    // Carousel navigation
    document.querySelector('.carousel-prev').addEventListener('click', () => {
      currentGalleryIndex = (currentGalleryIndex - 1 + currentGalleryImages.length) % currentGalleryImages.length;
      updateModalImage();
    });
    document.querySelector('.carousel-next').addEventListener('click', () => {
      currentGalleryIndex = (currentGalleryIndex + 1) % currentGalleryImages.length;
      updateModalImage();
    });

    function buildAltText(product) {
      return `${product.thickness} ${product.brand} ${product.type} (${product.grade})`;
    }

    // Load Products
    fetch('productDetails.json')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('products-container');
        container.innerHTML = ''; // Clear loading spinner

        data.categories.forEach(category => {
          const categorySection = document.createElement('div');
          categorySection.classList.add('product-category');

          const header = document.createElement('h3');
          header.textContent = category.name;
          categorySection.appendChild(header);

          const grid = document.createElement('div');
          grid.classList.add('product-grid');

          category.products.forEach(product => {
            const card = document.createElement('div');
            card.classList.add('product-card');

            // Image
            const img = document.createElement('img');
            img.src = product.images[0];
            img.alt = buildAltText(product);
            img.loading = "lazy";
            card.appendChild(img);

            // Footer
            const cardFooter = document.createElement('div');
            cardFooter.classList.add('card-footer');

            const cardText = document.createElement('div');
            cardText.classList.add('card-text');

            const titleElem = document.createElement('h3');
            titleElem.textContent = product.title;
            cardText.appendChild(titleElem);

            const descElem = document.createElement('p');
            descElem.textContent = product.description;
            cardText.appendChild(descElem);

            cardFooter.appendChild(cardText);

            // Details
            const details = document.createElement('details');
            details.classList.add('product-details-accordion');

            const summary = document.createElement('summary');
            summary.textContent = 'View Details';
            details.appendChild(summary);

            const detailsContent = document.createElement('div');
            detailsContent.classList.add('product-details-content');

            // Gallery in details
            if (product.images && product.images.length > 0) {
              const galleryDiv = document.createElement('div');
              galleryDiv.classList.add('product-gallery');

              const mainGalleryImage = document.createElement('img');
              mainGalleryImage.classList.add('gallery-main-image');
              mainGalleryImage.src = product.images[0];
              mainGalleryImage.dataset.index = 0;
              mainGalleryImage.addEventListener('click', () => {
                openGalleryModal(product.images, 0);
              });
              galleryDiv.appendChild(mainGalleryImage);

              if (product.images.length > 1) {
                const thumbnailsDiv = document.createElement('div');
                thumbnailsDiv.classList.add('gallery-thumbnails');
                product.images.forEach((imgSrc, index) => {
                  const thumbnailImg = document.createElement('img');
                  thumbnailImg.src = imgSrc;
                  thumbnailImg.addEventListener('click', () => {
                    mainGalleryImage.src = imgSrc;
                    mainGalleryImage.dataset.index = index;
                  });
                  thumbnailsDiv.appendChild(thumbnailImg);
                });
                galleryDiv.appendChild(thumbnailsDiv);
              }
              detailsContent.appendChild(galleryDiv);
            }

            // Specs
            const specs = [
              { label: 'Type', value: product.type },
              { label: 'Grade', value: product.grade },
              { label: 'Brand', value: product.brand },
              { label: 'Core', value: product.core },
              { label: 'Face', value: product.face },
              { label: 'Thickness', value: product.thickness },
              { label: 'Price', value: product.priceCategory }
            ];

            specs.forEach(spec => {
              if (spec.value) {
                const p = document.createElement('p');
                p.innerHTML = `<strong>${spec.label}:</strong> ${spec.value}`;
                detailsContent.appendChild(p);
              }
            });

            details.appendChild(detailsContent);
            cardFooter.appendChild(details);
            card.appendChild(cardFooter);
            grid.appendChild(card);
          });

          categorySection.appendChild(grid);
          container.appendChild(categorySection);
        });
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('products-container').innerHTML = '<p style="text-align:center; color: #ef4444;">Failed to load products.</p>';
      });
  </script>
</body>

</html>